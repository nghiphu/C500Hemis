@model IEnumerable<C500Hemis.Models.TbHocVien>  // Khai báo kiểu dữ liệu cho view, là một danh sách các đối tượng TbHocVien

@{
    ViewData["Title"] = "Học viên";  // Thiết lập tiêu đề cho trang
}

@section Heads {
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DANH SÁCH</title>
    <!-- Kết nối với các thư viện CSS để sử dụng Bootstrap, Font Awesome, và DataTables -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
}

<style>
    /* CSS CHO CÁC LỚP TRONG BẢNG */
    .table1 {
        width: 100%;
        text-align: center; /* Chữ vào giữa */
        border: none;
        border-collapse: collapse; /* Kết hợp khung vào nhau */
        padding-top: 0px;
        margin-left: 100px;
        margin-right: 100px;
    }

    h1 {
        text-align: center;
    }

    p {
        margin-left: 100px;
    }

    tr, td {
        border: 1px solid;
        border-color: azure; /* MÀU VIỀN */
        padding: 10px; /* KHOẢNG CÁCH BÊN TRONG */
    }

    .nut:hover {
        background-color: antiquewhite;
    }

    button {
        border-radius: 15px;
        border-color: black;
    }

    .table-container {
        white-space: nowrap; /* Không cho phép xuống dòng các cột */
    }

    /* CSS CHO NỀN */
    body::before {
        background-color: bisque;
        opacity: 0.5;
    }

    input {
        border-radius: 10px;
    }

    .input1:hover {
        background-color: antiquewhite;
    }

    .title {
        display: flex;
        flex-direction: row;
    }

    .p1 {
        font-size: 50px;
        color: black;
        font-style: italic;
        font-family: 'Comic Sans MS';
        text-shadow: 2px 2px darkgrey;
    }

    .container {
        text-align: center;
    }

    .sticky-col {
        position: sticky;
        left: 0;
        background-color: blue; /* Màu nền để dễ nhìn */
        z-index: 1; /* Đảm bảo cột đầu tiên ở trên các cột khác */
    }

    .table-hover {
        background-color: lightgray;
    }

    .body1 {
        background-image: url('https://scr.vn/wp-content/uploads/2020/07/%E1%BA%A2nh-n%E1%BB%81n-m%C3%A1y-t%C3%ADnh-c%E1%BB%B1c-%C4%91%E1%BA%B9p-Gearvn.jpg');
        background-size: cover; /* Đặt hình nền phủ kín */
        background-repeat: no-repeat; /* Không lặp lại hình nền */
        background-position: center; /* Căn giữa hình nền */
        padding-bottom: 80px;
    }
</style>

<head>
    <div class="title">
        <div class="container">
            <p class="p1">Bảng Thông Tin Học Viên</p>
        </div>
        <div style="text-align:right; vertical-align:middle">
            <!-- NÚT TẠO MỚI -->
            <a asp-action="Create"><button class="nut table-container" title="CREATE">Thêm mới</button></a>
        </div>
    </div>
</head>

<body class="body1">
    <!-- BẢNG HIỂN THỊ DỮ LIỆU -->
    <table class="table table-responsive table-hover table1" id="table-custom">
        <thead>
            <!-- DÒNG TIÊU ĐỀ CỦA BẢNG, MÀU NỀN LÀ MÀU XÁM ĐẬM -->
            <tr style="background-color: lightblue" class="table-container">
                <!-- CÁC CỘT HIỂN THỊ THUỘC TÍNH CỦA MODEL -->
                <th class="sticky-col" style="background-color: lightblue">Chức năng</th>
                <th>@Html.DisplayNameFor(model => model.MaHocVien)</th>
                <th>@Html.DisplayNameFor(model => model.Email)</th>
                <th>@Html.DisplayNameFor(model => model.Sdt)</th>
                <th>@Html.DisplayNameFor(model => model.SoSoBaoHiem)</th>
                <th>@Html.DisplayNameFor(model => model.NoiSinh)</th>
                <th>@Html.DisplayNameFor(model => model.QueQuan)</th>
                <th>@Html.DisplayNameFor(model => model.IdHuyenNavigation)</th>
                <th>@Html.DisplayNameFor(model => model.IdLoaiKhuyetTatNavigation)</th>
                <th>@Html.DisplayNameFor(model => model.IdNguoiNavigation)</th>
                <th>@Html.DisplayNameFor(model => model.IdTinhNavigation)</th>
                <th>@Html.DisplayNameFor(model => model.IdXaNavigation)</th>
            </tr>
        </thead>
        <tbody>
            <!-- Vòng lặp để hiển thị từng học viên trong danh sách Model -->
            @foreach (var item in Model)
            {
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd; class="sticky-col" ;>
                        <div style="display: flex; justify-content: center; gap: 5px;">
                            <!-- Nút SỬA -->
                            <a asp-action="Edit" asp-route-id="@item.IdHocVien" class="btn btn-primary btn-sm rounded-pill" title="Sửa">
                                <i class="fas fa-edit"></i>
                            </a>
                            <!-- NÚT CHI TIẾT -->
                            <a asp-action="Details" asp-route-id="@item.IdHocVien" class="btn btn-info btn-sm rounded-pill" title="Chi tiết">
                                <i class="fas fa-info-circle"></i>
                            </a>
                            <!-- NÚT XÓA -->
                            <a asp-action="Delete" asp-route-id="@item.IdHocVien" class="btn btn-danger btn-sm rounded-pill" title="Xóa">
                                <i class="fas fa-trash"></i>
                            </a>
                        </div>
                    </td>
                    <td>@Html.DisplayFor(modelItem => item.MaHocVien)</td>
                    <td>@Html.DisplayFor(modelItem => item.Email)</td>
                    <td>@Html.DisplayFor(modelItem => item.Sdt)</td>
                    <td>@Html.DisplayFor(modelItem => item.SoSoBaoHiem)</td>
                    <td>@Html.DisplayFor(modelItem => item.NoiSinh)</td>
                    <td>@Html.DisplayFor(modelItem => item.QueQuan)</td>
                    <td>@Html.DisplayFor(modelItem => item.IdHuyenNavigation.TenHuyen)</td>
                    <td>@Html.DisplayFor(modelItem => item.IdLoaiKhuyetTatNavigation.LoaiKhuyetTat)</td>
                    <td>@Html.DisplayFor(modelItem => item.IdNguoiNavigation.name)</td>
                    <td>@Html.DisplayFor(modelItem => item.IdTinhNavigation.TenTinh)</td>
                    <td>@Html.DisplayFor(modelItem => item.IdXaNavigation.TenXa)</td>
                </tr>
            }
        </tbody>
    </table>
</body>

@section Scripts {
    <!-- Kết nối thư viện jQuery và DataTables -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#table-custom').DataTable({
                "lengthMenu": [1, 2, 4, 6, 8, 10],
                "paging": true,
                "searching": true,
                "ordering": true,
                "info": true,
                // Tùy chỉnh ngôn ngữ cho DataTables - Front-end
                "language": {
                    "lengthMenu": "Hiển thị _MENU_ mục mỗi trang",
                    "zeroRecords": "Không tìm thấy dữ liệu",
                    "info": "Có tổng cộng _TOTAL_ bản ghi",
                    "infoEmpty": "Không có dữ liệu",
                    "infoFiltered": "(lọc từ _MAX_ tổng số mục)",
                    "search": "Tìm kiếm:",
                    "paginate": {
                        "first": "Đầu tiên",
                        "last": "Cuối cùng",
                        "next": "Sau",
                        "previous": "Trước"
                    }
                }
            });
        });
    </script>
}
